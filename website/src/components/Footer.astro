---
import { Icon } from "astro-icon/components";
import { FooterSocials } from "@data/socials";
---

<script>
  const updateYear = () => {
    const currentYear = new Date().getFullYear();
    const yearElement = document.getElementById("year");
    if (yearElement) {
      yearElement.innerText = currentYear.toString();
    }
  };

  const setupEmoji = () => {
    const emojis = ["ðŸ˜º", "ðŸ±", "ðŸ˜¸", "ðŸ˜»", "ðŸ™€", "ðŸ˜½", "ðŸ˜¹", "ðŸ˜¿", "ðŸ˜¾"];
    const emojiContainer = document.getElementById("random-emoji");
    if (emojiContainer) {
      emojiContainer.innerText =
        emojis[Math.floor(Math.random() * emojis.length)];
    }
  };

  document.addEventListener("DOMContentLoaded", () => {
    updateYear();
    setupEmoji();
  });
</script>

<footer
  class="px-4 py-6 mt-8 bg-transparent text-neutral-800 dark:text-neutral-200 transition-colors duration-300"
>
  <div class="max-w-4xl mx-auto">
    <div class="flex flex-col md:flex-row justify-between items-center gap-4">
      <!-- Left section -->
      <div class="flex flex-col items-center md:items-start">
        <div class="text-sm font-medium">
          2021 - <span id="year"></span> &copy;&nbsp;<a
            href="https://github.com/pandianmn"
            class="text-neutral-700 dark:text-neutral-300 hover:text-primary-600 dark:hover:text-primary-400 transition duration-300"
            target="_blank"
            rel="noopener noreferrer">Pandian Muninathan</a
          >
        </div>
        <div class="text-xs mt-1 text-neutral-600 dark:text-neutral-400">
          Template by <a
            href="https://github.com/cojocaru-david"
            class="text-neutral-600 dark:text-neutral-400 hover:text-primary-600 dark:hover:text-primary-400 transition duration-300"
            target="_blank"
            rel="noopener noreferrer">David Cojocaru</a> â€¢ Open-source under MIT license <span id="random-emoji" class="ml-1"
          ></span>
        </div>
      </div>

      <!-- Right section -->
      <div class="flex flex-col items-start gap-3">
        <span class="text-sm font-medium">Follow me on:</span>
        <div class="flex items-center gap-3">
          {
            FooterSocials.map((social) => (
              <a
                href={social.url}
                class="text-neutral-700 dark:text-neutral-300 hover:text-primary-600 dark:hover:text-primary-400 transition duration-300"
                title={social.name}
                target="_blank"
                rel="noopener noreferrer"
                aria-label={`Follow me on ${social.name}`}
              >
                <Icon name={social.icon} class="w-8 h-8" />
              </a>
            ))
          }
        </div>
      </div>
    </div>
  </div>
</footer>

<style>
  @media (max-width: 640px) {
    footer {
      padding: 1rem;
    }
  }

  @media (prefers-reduced-motion: no-preference) {
    #random-emoji {
      display: inline-block;
      animation: wave 2s ease-in-out infinite alternate;
    }
  }

  @keyframes wave {
    0% {
      transform: translateY(0);
    }
    100% {
      transform: translateY(-5px);
    }
  }
</style>
